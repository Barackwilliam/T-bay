<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>T-bay – Tanzania’s Digital Marketplace</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  {% load static %}
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-..." crossorigin="anonymous">
  <!-- FontAwesome 6 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-gradient: linear-gradient(135deg,#0f1e38 0%,#1f2f58 80%);
      --surface: #1f2f58;
      --card: #1d2a4f;
      --text: #e8ebf7;
      --muted: #8fa3bf;
      --accent: #ff7a29;
      --accent-dark: #e06622;
      --radius: .75rem;
      --shadow: 0 20px 40px -10px rgba(15,30,56,.35);
      --transition: .35s cubic-bezier(.4,.2,.2,1);
    }
    * { box-sizing:border-box; }
    body {
      background: var(--bg-gradient);
      color: var(--text);
      font-family: 'Inter', system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100%;
    }
    a { text-decoration:none; }
    .container-max { max-width: 1200px; margin:0 auto; padding:0 16px; }

    /* Navbar */
    .navbar-custom {
      background: var(--surface);
      padding: .5rem 1rem;
      position: sticky;
      top:0;
      z-index: 100;
      border-bottom: 1px solid rgba(255,255,255,0.05);
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: .75rem;
    }
    .brand {
      font-weight: 700;
      font-size: 1.25rem;
      color: #fff;
      margin-right: 1rem;
    }
    .brand span { color: var(--accent); }
    .nav-links {
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
      list-style:none;
      padding:0;
      margin:0;
    }
    .nav-links a, .nav-links form button {
      color: #cdd4ec;
      font-weight: 500;
      background: none;
      border: none;
      padding: .5rem .75rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: .85rem;
      position: relative;
    }
    .nav-links a:hover, .nav-links a.active, .nav-links form button:hover {
      color: #fff;
      background: rgba(255,255,255,0.05);
    }
    .search-wrapper {
      position: relative;
      flex:1;
      min-width: 200px;
      max-width: 500px;
      margin: 5px 0;
    }
    .search-input {
      width: 100%;
      padding: .55rem 1.25rem .55rem 2.5rem;
      border-radius: 999px;
      border: none;
      background: rgba(255,255,255,0.08);
      color: #fff;
      font-size: .9rem;
      outline: none;
      transition: var(--transition);
    }
    .search-input::placeholder { color: rgba(255,255,255,0.6); }
    .search-icon {
      position:absolute;
      left:12px;
      top:50%;
      transform:translateY(-50%);
      color: rgba(255,255,255,0.75);
      font-size: .9rem;
      pointer-events:none;
    }
    .btn-accent {
      background: var(--accent);
      border: none;
      color: #fff;
      padding: .55rem 1rem;
      border-radius: 999px;
      font-weight: 600;
      font-size: .85rem;
      cursor: pointer;
      transition: background .25s;
    }
    .btn-accent:hover { background: var(--accent-dark); }
    .cart-btn {
      position: relative;
      background: rgba(255,255,255,0.08);
      border: none;
      color: #fff;
      padding: .55rem .9rem;
      border-radius: 999px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-size: .85rem;
      cursor:pointer;
      font-weight:500;
      transition: background var(--transition);
    }
    .cart-btn:hover { background: rgba(255,255,255,0.15); }
    .cart-badge {
      background: #ff4d4f;
      border-radius: 50%;
      padding: 3px 7px;
      font-size: 10px;
      font-weight: 700;
      margin-left:4px;
      display:inline-block;
    }
    .menu-toggle {
      background: none;
      border: none;
      color: #fff;
      font-size: 1.25rem;
      display: none;
      cursor: pointer;
    }
    @media (max-width: 992px) {
      .menu-toggle { display:inline-block; }
      .nav-collapse {
        width: 100%;
        display: none;
        flex-direction: column;
        gap: .75rem;
        margin-top: 8px;
      }
      .nav-collapse.show { display:flex; }
      .search-wrapper { order:3; }
    }

    /* Main content */
    .container-inner { padding: 90px 16px 40px; }

    /* Footer */
    .footer {
      background: #0f1e38;
      padding: 40px 16px;
      color: #fff;
      font-size: .9rem;
      margin-top: 60px;
    }
    .footer a { color: rgba(255,255,255,0.8); text-decoration:none; }
    .footer a:hover { color:#fff; }
    .footer .title { font-weight:600; margin-bottom:12px; }
    .small-text { font-size:.75rem; color: rgba(255,255,255,0.6); }
    .footer .social a { margin-right:12px; font-size:1rem; }
  </style>
  <script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js"></script>

</head>

<body>

  <!-- Navbar -->
  <nav class="navbar-custom">
    <div class="container-max d-flex flex-wrap align-items-center gap-2">
      <a href="/" class="brand"><span>T-Bay</span> Tanzania</a>

      <button class="menu-toggle ms-auto d-lg-none" id="navToggle" aria-label="Toggle menu">
        <i class="fa-solid fa-bars"></i>
      </button> 

       {% if messages %}
        {% for message in messages %}
          <div class="alert alert-info py-2 px-3">{{ message }}</div>
        {% endfor %}
      {% endif %}

      <div class="d-flex align-items-center flex-wrap gap-2 nav-collapse" id="navContent">
        <ul class="nav-links mb-0 d-flex align-items-center gap-1">
          {% if request.user.is_authenticated %}
            <li><a href="/my-order" class="nav-link">My Orders</a></li>
            <li><a href="/my-profile" class="nav-link">Profile</a></li>
            <li>
              <form method="POST" action="{% url 'logout' %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="nav-link" aria-label="Logout">Logout</button>
              </form>
            </li>
          {% else %}
            <li><a href="/" class="nav-link">Home</a></li>
            <li><a href="/customerlogin" class="nav-link">Login</a></li>
            <li><a href="/customersignup" class="nav-link">Sign Up</a></li>
            <li><a href="/aboutus" class="nav-link">About Us</a></li>
          {% endif %}
        </ul>

        <div class="search-wrapper flex-grow-1">
          <span class="search-icon"><i class="fa-solid fa-magnifying-glass"></i></span>
          <form action="/search" method="get">
            <input class="search-input" type="search" name="query" placeholder="Search for products" aria-label="Search">
          </form>
        </div>

        <div class="d-flex align-items-center gap-2">
          <a href="/cart" class="cart-btn" aria-label="View cart">
            <i class="fa-solid fa-cart-shopping"></i>
            <span>Cart</span>
            <span class="cart-badge">{{ product_count_in_cart }}</span>
          </a>
          {% if not request.user.is_authenticated %}
            <a href="/customerlogin" class="btn-accent">Get Started</a>
          {% endif %}
        </div>
      </div>
    </div>
  </nav>

  <!-- Main content placeholder -->
  <main class="container-inner container-max">
    {% block content %}{% endblock content %}
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container-max">
      <div class="row">
        <div class="col-md-4 mb-4">
          <div class="title">T-bay – Tanzania’s Digital Marketplace</div>
          <p>Building trustworthy commerce experiences. &copy; 2025. <a href="/adminclick"> Admin</a></p>
          <div class="small-text">Mobile-first, performance optimized.</div>
        </div>
        <!-- <div class="col-md-2 mb-4">
          <div class="title">Company</div>
          <ul class="list-unstyled">
            <li><a href="/">Home</a></li>
            <li><a href="/aboutus">About</a></li>
            <li><a href="/my-order">Orders</a></li>
          </ul>
        </div>
        <div class="col-md-2 mb-4">
          <div class="title">Support</div>
          <ul class="list-unstyled">
            <li><a href="/contact">Contact</a></li>
            <li><a href="/help">Help Center</a></li>
            <li><a href="/terms">Terms</a></li>
          </ul>
        </div> -->
        <div class="col-md-4 mb-4">
          <div class="title">Stay Connected</div>
          <p>Subscribe for updates and offers.</p>
          <form class="d-flex gap-2 mb-2" novalidate>
            <input type="email" placeholder="you@domain.com" class="form-control form-control-sm" style="border-radius:999px; background: rgba(255,255,255,0.08); border:none; color:#fff;" aria-label="Email">
            <button type="submit" class="btn-accent btn-sm" style="white-space:nowrap;">Subscribe</button>
          </form>
          <div class="social">
            <a href="#" aria-label="Facebook" class="text-white me-2"><i class="fa-brands fa-facebook-f"></i></a>
            <a href="#" aria-label="Instagram" class="text-white me-2"><i class="fa-brands fa-instagram"></i></a>
            <a href="#" aria-label="Twitter" class="text-white me-2"><i class="fa-brands fa-twitter"></i></a>
            <a href="#" aria-label="LinkedIn" class="text-white"><i class="fa-brands fa-linkedin-in"></i></a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Bootstrap bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-..." crossorigin="anonymous"></script>
  <script>
    const navToggle = document.getElementById('navToggle');
    const navContent = document.getElementById('navContent');
    navToggle?.addEventListener('click', () => {
      navContent.classList.toggle('show');
    });
  </script>
</body>
</html>
